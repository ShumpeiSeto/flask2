{% extends 'testtemp/layout.html' %}
{% block content %}
  <div class="container vh-100 px-2 py-0">
    <div class="row h-auto justify-content-center align-items-start mb-4">
      <h3 class="text-center font-size-l mb-3">マイタスク</h3>
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div class="sort_buttons d-flex flex-row justify-content-end align-items-end px-0 py-1 gap-2"> 
          <h4 class="font-size-m m-auto">未完了タスク</h4>
          <a href="{{ url_for('button_click', flg=1) }}"><button type="button" class="btn btn-outline-warning btn-sm border-2">重要度順</button></a>
          <a href="{{ url_for('button_click', flg=2) }}"><button type="button" class="btn btn-outline-secondary btn-sm border-2">日付順</button></a>
        </div>
        <table width="100%" class="table table-light table-hover table-bordered">
          <thead>
            <tr>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">#</th>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">タスク名</th>
              <th colspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">期限</th>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">重要度</th>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">操作</th>
            </tr>
            <tr>
              <th scope="col" class="p-0 p-md-0 text-center align-middle">日</th>
              <th scope="col" class="p-0 p-md-0 text-center align-middle">時間</th>
            </tr>
          </thead>
          <tbody>
            {% for nc_task in nc_tasks %}
              <tr>
                <th width="10%" scope="row" class="px-0 p-md-2 text-center align-middle">
                  <a href="{{ url_for('check_task', task_id=nc_task['task_id']) }}" class="check_box text-decoration-none">
                    {# <input type="checkbox" class="check_box_fin rounded-circl px-1 py-2" onclick="{{ url_for('check_task', task_id=nc_task['task_id']) }}"> #}
                    <input type="checkbox" class="check_box_fin rounded-circl px-1 py-2" onclick="window.location.href='{{ url_for('check_task', task_id=nc_task['task_id']) }}'">
                    <button type="button" class="btn rounded-circl px-1 py-2 check_box_fin_b">　</button>
                  </a>
                </th>
                <td width="45%" class="px-0 p-md-0 text-center align-middle">
                  <label class="form-check-label my-auto" for="firstCheckbox">{{ nc_task['title']}}</label>
                </td>
                <td width="15%" class="px-0 p-md-0 text-center align-middle">
                  <label class="deadline my-auto" for="deadline">{{ nc_task['deadline'] | add_weekday }}</label>
                </td>
                <td width="10%" class="px-0 p-md-0 text-center align-middle">
                  <label class="deadline my-auto" for="deadline">{{ nc_task['deadline'].strftime('%H:%M') }}</label>
                </td>
                <td width="5%" class="px-0 p-md-0 text-center align-middle">
                  <label class="importance my-auto" for="importance">{{ nc_task['importance'] | convert_importance }}</label>
                </td>
                <td width="15%" class="px-0 p-md-0 text-center align-middle">
                  <div class="handle_buttons d-flex flex-row px-0 py-auto p-md-2 text-center justify-content-evenly align-middle gap-3 flex-grow">
                    <a href="{{ url_for('edit_task', task_id=nc_task['task_id']) }}" class="mb-1"><button type="button" class="btn btn-primary py-2 px-1">編集</button></a>
                    <a href="{{ url_for('delete_task', task_id=nc_task['task_id']) }}"><button type="button" class="btn btn-danger py-2 px-1">削除</button></a>
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="fixed_button text-center align-middle">
      <a href="{{ url_for('add_task')}}">
      <button type="button" class="btn btn-primary font-size-l rounded-circle">+</button></a>
    </div>

    <div class="row h-auto justify-content-center align-items-start">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div class="sort_buttons d-flex flex-row justify-content-end align-items-end px-0 py-1 gap-2"> 
        <h4 class="font-size-m m-auto">完了済みタスク</h4>
        <a href="{{ url_for('button_click', flg=3) }}"><button type="button" class="btn btn-outline-warning border-2 btn-sm">重要度順</button></a>
        <a href="{{ url_for('button_click', flg=4) }}"><button type="button" class="btn btn-outline-secondary border-2 btn-sm">日付順</button></a>
        </div>
        <table width="100%" class="table table-light table-hover table-bordered">
          <thead>
            <tr>
              {# <th rowspan="2" scope="col" class="p-0 p-md-2 text-center align-middle">#</th> #}
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">タスク名</th>
              <th colspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">期限</th>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">重要度</th>
              <th rowspan="2" scope="col" class="p-0 p-md-0 text-center align-middle">操作</th>
            </tr>
            <tr>
              <th scope="col" class="p-0 p-md-0 text-center align-middle">日</th>
              <th scope="col" class="p-0 p-md-0 text-center align-middle">時間</th>
            </tr>
          </thead>
          <tbody>
            {% for c_task in c_tasks %}
              <tr>
                <td width="55%" class="px-0 p-md-0 text-center align-middle">
                  <label class="comp_task_name" for="firstCheckbox">{{ c_task['title']}}</label>
                </td>
                <td width="15%" class="px-0 p-md-0 text-center align-middle">
                  <label class="comp_task_deadline" for="deadline">{{ c_task['deadline'] | add_weekday }}</label>
                </td>
                <td width="10%"class="px-0 p-md-0 text-center align-middle">
                  <label class="comp_task_deadline" for="deadline">{{ c_task['deadline'].strftime('%H:%M')}}</label>
                </td>
                <td width="5%"class="px-0 p-md-0 text-center align-middle">
                  <label class="importance my-auto" for="importance">{{ c_task['importance'] | convert_importance }}</label>
                </td>
                <td width="15%" class="handle_buttons px-0 p-md-0 text-center align-middle">
                  <div class="d-flex flex-row px-0 py-auto p-md-2 text-center justify-content-evenly align-middle gap-3 flex-grow">

                    <a href="{{ url_for('check_task', task_id=c_task['task_id']) }}" class="mb-1">
                  <button type="button" class="btn btn-gray text-light py-2 px-1">戻す</button>
                    </a>
                    <a href="{{ url_for('delete_task', task_id=c_task['task_id']) }}"><button type="button" class="btn btn-danger py-2 px-1">削除</button></a>
                  </div>

                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
